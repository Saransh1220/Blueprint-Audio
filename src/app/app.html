<!-- LOADING BAR -->
<app-loading-bar></app-loading-bar>

<!-- BACKGROUND GRID -->
<div class="bg-overlay">
  <div class="orb-layer"></div>
</div>

<!-- PRELOADER -->
<div class="loader">
  <div class="logo-container">
    <svg viewBox="0 0 100 100" class="logo-svg">
      <defs>
        <filter id="glow" x="-20%" y="-20%" width="140%" height="140%">
          <feGaussianBlur stdDeviation="2" result="blur" />
          <feComposite in="SourceGraphic" in2="blur" operator="over" />
        </filter>
      </defs>
      <!-- Hexagon Container -->
      <path
        class="logo-shape"
        d="M50 5 L90 25 L90 75 L50 95 L10 75 L10 25 Z"
        fill="none"
        stroke="var(--brand-color)"
        stroke-width="2"
      />
      <!-- Pulse Wave -->
      <path
        class="logo-pulse"
        d="M20 50 L35 50 L45 25 L55 75 L65 50 L80 50"
        fill="none"
        stroke="var(--brand-color)"
        stroke-width="3"
        stroke-linecap="round"
        stroke-linejoin="round"
      />
    </svg>
  </div>
  <div class="loading-text">INITIALIZING<span class="dots">...</span></div>
</div>

<style>
  .loader {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: #050505;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    z-index: 9999;
    transition:
      opacity 0.5s ease-out,
      visibility 0.5s;
  }

  .logo-container {
    width: 80px;
    height: 80px;
    margin-bottom: 20px;
    position: relative;
  }

  .logo-svg {
    width: 100%;
    height: 100%;
    filter: drop-shadow(0 0 10px rgba(var(--brand-color-rgb), 0.5));
  }

  .logo-shape {
    stroke-dasharray: 300;
    stroke-dashoffset: 300;
    animation: drawShape 2s ease-in-out infinite alternate;
  }

  .logo-pulse {
    stroke-dasharray: 100;
    stroke-dashoffset: 100;
    animation: drawPulse 2s ease-in-out infinite alternate 0.5s;
    /* Delayed start */
  }

  .loading-text {
    font-family: 'Space Mono', monospace;
    color: var(--text-color);
    font-size: 0.9rem;
    letter-spacing: 4px;
    opacity: 0.8;
  }

  .dots {
    animation: blink 1.5s infinite;
  }

  @keyframes drawShape {
    0% {
      stroke-dashoffset: 300;
      opacity: 0.5;
    }

    100% {
      stroke-dashoffset: 0;
      opacity: 1;
    }
  }

  @keyframes drawPulse {
    0% {
      stroke-dashoffset: 100;
      opacity: 0;
    }

    50% {
      opacity: 1;
    }

    100% {
      stroke-dashoffset: 0;
      opacity: 1;
    }
  }

  @keyframes blink {
    0%,
    100% {
      opacity: 0;
    }

    50% {
      opacity: 1;
    }
  }
</style>

<app-header (cartClick)="toggleCart()"></app-header>
<app-cart></app-cart>
<router-outlet></router-outlet>
<app-player></app-player>
<app-modal></app-modal>
<app-toast></app-toast>
<app-footer></app-footer>
