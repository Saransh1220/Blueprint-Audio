<section class="lab-section container">
  <div class="section-head">
    {{ type === 'beat' ? 'Featured Beats' : 'Featured Samples' }}<br />
    <span class="catalog-subtitle">LATEST DROPS</span>
  </div>

  <!-- TOOLBAR: SEARCH ONLY -->
  <div class="toolbar">
    <div class="search-bar">
      <i class="fas fa-search"></i>
      <input
        type="text"
        placeholder="SEARCH_DATABASE..."
        [ngModel]="searchTerm()"
        (ngModelChange)="searchTerm.set($event)"
        (keydown.enter)="onSearch()"
      />
    </div>

    <div class="toolbar-actions">
      <div class="view-controls">
        <button
          class="btn-view"
          [class.active]="viewMode() === 'grid'"
          (click)="setViewMode('grid')"
          title="Grid View"
        >
          <i class="fas fa-th-large"></i>
        </button>
        <button
          class="btn-view"
          [class.active]="viewMode() === 'list'"
          (click)="setViewMode('list')"
          title="List View"
        >
          <i class="fas fa-list"></i>
        </button>
      </div>
    </div>
  </div>

  <!-- LOADING STATE -->
  @if (isLoading()) {
    <div class="loading-container">
      <app-loading-spinner size="60px"></app-loading-spinner>
      <div class="loading-text">Loading...</div>
    </div>
  } @else {
    <!-- GRID VIEW -->
    @if (viewMode() === 'grid') {
      <div class="spec-grid">
        @for (spec of specs(); track spec.id; let i = $index) {
          <app-spec-card [spec]="spec" [priority]="i < 4"></app-spec-card>
        }
      </div>
    }

    <!-- LIST VIEW -->
    @if (viewMode() === 'list') {
      <div class="list-container">
        @for (spec of specs(); track spec.id; let i = $index) {
          <app-spec-list-item [spec]="spec" [priority]="i < 6"></app-spec-list-item>
        }
      </div>
    }

    @if (specs().length === 0) {
      <div style="text-align: center; padding: 60px; color: var(--line-color)">
        NO DATA AVAILABLE.
      </div>
    }

    <div class="view-all-container">
      <button class="btn-view-all" (click)="navigateToSearch()">
        VIEW FULL CATALOG <i class="fas fa-long-arrow-alt-right"></i>
      </button>
    </div>
  }
</section>
