@if (isOpen()) {
  <div class="modal-overlay" (click)="close()">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h2>Edit Spec</h2>
        <button class="btn-close" (click)="close()">&times;</button>
      </div>

      <form [formGroup]="editForm" class="modal-body">
        <div class="form-group">
          <label for="title">Title *</label>
          <input id="title" type="text" formControlName="title" placeholder="Enter spec title" />
          @if (editForm.get('title')?.invalid && editForm.get('title')?.touched) {
            <small class="error">Title is required</small>
          }
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="base_price">Price (â‚¹) *</label>
            <input
              id="base_price"
              type="number"
              formControlName="base_price"
              step="0.01"
              min="0"
              placeholder="29.99"
            />
            @if (editForm.get('base_price')?.invalid && editForm.get('base_price')?.touched) {
              <small class="error">Valid price required</small>
            }
          </div>

          <div class="form-group">
            <label for="bpm">BPM</label>
            <input
              id="bpm"
              type="number"
              formControlName="bpm"
              min="50"
              max="300"
              placeholder="140"
            />
          </div>
        </div>

        <div class="form-group">
          <label for="key">Key</label>
          <input id="key" type="text" formControlName="key" placeholder="C Minor" />
        </div>

        <div class="form-group">
          <label for="tags">Tags (comma separated)</label>
          <input id="tags" type="text" formControlName="tags" placeholder="trap, dark, 808" />
        </div>
      </form>

      <div class="modal-footer">
        <button class="btn btn-secondary" (click)="close()" [disabled]="isSaving()">Cancel</button>
        <button
          class="btn btn-primary"
          (click)="save()"
          [disabled]="isSaving() || editForm.invalid"
        >
          @if (isSaving()) {
            Saving...
          } @else {
            Save Changes
          }
        </button>
      </div>
    </div>
  </div>
}
