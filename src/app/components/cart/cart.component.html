<div class="cart-overlay" [class.open]="isOpen()" (click)="toggle()"></div>

<div class="cart-sidebar" [class.open]="isOpen()">
  <div class="cart-header">
    <h3>Cart ({{ items().length }})</h3>
    <button class="close-btn" (click)="toggle()">
      <i class="fas fa-times"></i>
    </button>
  </div>

  <div class="cart-items">
    @if (items().length === 0) {
      <div class="empty-cart">
        <i class="fas fa-shopping-basket"></i>
        <p>Your cart is empty</p>
      </div>
    }

    @for (item of cartService.items(); track item.id) {
      <div class="cart-item">
        <img [src]="item.spec.imageUrl" [alt]="item.spec.title" />
        <div class="item-details">
          <h4>{{ item.spec.title }}</h4>
          <span class="license-type">{{ item.license.name }}</span>
          <span class="price">\${{ item.license.price }}</span>
        </div>
        <button class="remove-btn" (click)="removeItem(item.id)">
          <i class="fas fa-trash"></i>
        </button>
      </div>
    }
  </div>

  @if (items().length > 0) {
    <div class="cart-footer">
      <div class="total-row">
        <span>Total</span>
        <span>\${{ total | number: '1.2-2' }}</span>
      </div>
      <button class="checkout-btn" (click)="checkout()">Checkout</button>
    </div>
  }
</div>
