<div class="spec-card" (click)="openDetails()">
  <div class="spec-img-box">
    <img [src]="imageUrl" class="card-img" alt="{{ spec.title }} Cover" />
    <div class="overlay-gradient"></div>
    <div class="play-btn-neon" (click)="playSong($event)">
      <i class="fa-solid fa-play"></i>
    </div>
  </div>

  <div class="card-content">
    <div class="spec-header-mini">
      <!-- Show Primary Genre if available, else nothing or fallback -->
      @if (spec.genres && spec.genres.length > 0) {
        <span class="genre-badge">{{ spec.genres[0].name }}</span>
      }
    </div>

    <div class="spec-title">{{ spec.title }}</div>

    <div class="card-meta">
      <span class="tag-glass">{{ spec.bpm }} BPM</span>
      <span class="tag-glass">{{ spec.key }}</span>
      <!-- Limit tags to 3 -->
      @for (tag of spec.tags.slice(0, 3); track tag) {
        <span class="tag-glass">#{{ tag }}</span>
      }
    </div>

    <div class="spec-footer">
      <div class="spec-price">â‚¹{{ spec.price }}</div>
      <i class="fa-solid fa-cart-plus cart-btn" (click)="addToCart($event)"></i>
    </div>
  </div>
</div>
